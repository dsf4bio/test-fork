<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üè° Casa Vacanze Brasile</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;900&display=swap');
  body {font-family:'Poppins',sans-serif;background:#fef6f0;color:#4a3c31;}
  .gallery {max-width:1200px;margin:40px auto 10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:18px;}
  .gallery-img {aspect-ratio: 4/3; width:100%; object-fit:cover; border-radius:1.1rem; border:3px solid #f3e9d2; box-shadow:0 4px 16px rgba(0,0,0,0.08); transition:transform .4s, box-shadow .3s, border-color .3s; cursor:zoom-in; background:#eee;}
  .gallery-img:hover {transform:scale(1.07); box-shadow:0 8px 32px rgba(187,148,87,0.20); border-color:#bb9457;}
  .card {background:white;border-radius:1rem;box-shadow:0 8px 16px rgba(0,0,0,0.1);padding:2.5rem;}
  .loader2 {display:flex;justify-content:center;align-items:center;margin:1rem auto;}
  .loader2 span {width:44px;height:44px;border:5px solid #f3e9d2;border-top:5px solid #bb9457;border-radius:50%;display:inline-block;animation:spin 1s linear infinite;}
  @keyframes spin {100%{transform:rotate(360deg)}}
  .popup-bg {position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.55);display:none;justify-content:center;align-items:center;z-index:20000;}
  .popup-anim {background:white;padding:2.2rem 2rem;border-radius:1.1rem;text-align:center;box-shadow:0 8px 40px #bb9457a6;position:relative;animation:popshow .45s cubic-bezier(.6,2,.4,1);}
  @keyframes popshow {from{opacity:0;transform:scale(.8);} to{opacity:1;transform:scale(1);}}
  .close-popup-btn {position:absolute;top:10px;right:18px;font-size:2rem;font-weight:700;color:#bbb;cursor:pointer;transition:.2s;}
  .close-popup-btn:hover {color:#bb9457;}
  .cta {display:inline-block;margin-top:1rem;padding:.6rem 1.2rem;background:#bb9457;color:#fef6f0;border-radius:.6rem;font-weight:700;text-decoration:none;}
  .strikethrough {text-decoration: line-through; color: #bb9457;}
  .prezzo-sconto {color:#15803d; font-weight:700;}
  .form-title {text-align:center;font-size:1.3rem;font-weight:700;margin-bottom:1.5rem;}
  .success-message {text-align:center; color:#15803d; font-weight:600; margin-top:1rem; display:none;}
  .error-message {text-align:center; color:#b91c1c; font-weight:600; margin-top:1rem; display:none;}
</style>
</head>
<body>
<!-- HERO SECTION -->
<section style="width:100vw; height:420px; overflow:hidden; border-radius:0 0 28px 28px; box-shadow:0 6px 18px rgba(0,0,0,0.18); position:relative;">
  <img
    src="https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=1500&q=80"
    alt="Spiaggia tropicale a Porto Seguro Bahia Brasile"
    style="width:100vw; height:100%; object-fit:cover; display:block;"
    loading="eager"
  />
  <div style="position:absolute; bottom:24px; left:36px; background:rgba(0,0,0,0.34); color:#fff; padding:1.2rem 2.4rem; border-radius:1.2rem; box-shadow:0 2px 8px rgba(0,0,0,0.18);">
    <h1 style="font-size:2.2rem; font-weight:900; letter-spacing:-1px;">Casa Vacanze a Porto Seguro</h1>
    <div style="font-size:1.2rem; margin-top:8px;">Il tuo rifugio esclusivo tra spiagge, palme e relax in Brasile</div>
  </div>
</section>

<!-- DESCRIZIONE -->
<section id="descr1" class="max-w-3xl mx-auto my-10 px-4">
  <h2 class="text-xl font-bold mb-2">Ti aspettiamo a Porto Seguro</h2>
  <p>
    Vivi Porto Seguro in Esclusiva. Relax, Sicurezza e Spazio per Gruppi, Coppie o Famiglie.<br>
    Scopri la magia di Porto Seguro, la prima citt√† del Brasile, dove storia, cultura e natura si incontrano in <b>un'atmosfera unica.</b> Spiagge spettacolari, serate vibranti sulla Passarela do √Ålcool con musica dal vivo, artigianato e ristoranti... il Brasile pi√π autentico ti aspetta.<br>
    üéØ E tu potrai viverlo al meglio, in una villa privata esclusiva, all'interno di un residence di lusso immerso nel verde, videosorvegliato 24h, con accesso controllato per offrirti massima sicurezza, privacy e tranquillit√†.
  </p>
</section>

<!-- GALLERIA -->
<section id="galleria" class="gallery">
  <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1465156799763-2c087c332922?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1468413253725-0d5181091126?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1482062364825-616fd23b8fc1?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1509228468518-180dd4864904?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1465101178521-c1a9136a3fd9?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1519985176271-adb1088fa94c?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1465101178521-c1a9136a3fd9?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
  <img src="https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80" class="gallery-img" alt="">
</section>

<!-- Lightbox -->
<div id="lightbox" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.85);display:none;justify-content:center;align-items:center;z-index:10000;">
  <img src="" alt="Foto ingrandita" style="max-width:92vw;max-height:88vh;border-radius:1rem;box-shadow:0 4px 32px #000;">
  <button class="close-btn" style="position:absolute;top:24px;right:38px;font-size:2.8rem;font-weight:700;color:#fff;background:none;border:none;cursor:pointer;">&times;</button>
</div>

<!-- SIMULATORE PREZZI DOPPIO -->
<section id="simulatore" class="my-12">
  <div class="card max-w-2xl mx-auto">
    <div class="form-title">Simulatore prezzi</div>
    <div class="flex gap-2 mb-5 justify-center">
      <button type="button" id="btnGruppi" class="px-3 py-1 rounded bg-[#bb9457] text-white font-bold">Gruppi numerosi</button>
      <button type="button" id="btnCamera" class="px-3 py-1 rounded bg-gray-200 font-bold">Coppie/Famiglie</button>
    </div>
    <!-- Form Gruppi -->
    <form id="formGruppi" class="flex flex-col gap-3">
      <label class="flex flex-col font-semibold text-sm">
        Persone (5‚Äì30):
        <input type="number" id="people" min="5" max="30" value="5" placeholder="Inserisci numero persone"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Check‚Äëin:
        <input type="date" id="checkin" placeholder="Seleziona data check-in"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Check‚Äëout:
        <input type="date" id="checkout" placeholder="Seleziona data check-out"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <button type="submit"
        class="bg-[#bb9457] text-white rounded-lg px-4 py-2 font-bold hover:bg-[#a67c52] transition text-base">
        Calcola
      </button>
      <div class="loader2" id="loaderGruppi" style="display:none;"><span></span></div>
      <div class="result mt-2 simResultGruppi font-semibold" id="simResultGruppi"></div>
    </form>
    <!-- Form Camera -->
    <form id="formCamera" class="flex flex-col gap-3 hidden">
      <div class="form-title">Simulatore prezzi</div>
      <label class="flex flex-col font-semibold text-sm">
        Adulti (1-2):
        <input type="number" id="adulti" min="1" max="2" value="2" placeholder="Inserisci numero adulti"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Bambini (0-12 anni):
        <input type="number" id="bambini" min="0" max="2" value="0" placeholder="Inserisci numero bambini"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Check‚Äëin:
        <input type="date" id="checkinCam" placeholder="Seleziona data check-in"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Check‚Äëout:
        <input type="date" id="checkoutCam" placeholder="Seleziona data check-out"
          class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <button type="submit"
        class="bg-[#bb9457] text-white rounded-lg px-4 py-2 font-bold hover:bg-[#a67c52] transition text-base">
        Calcola
      </button>
      <div class="loader2" id="loaderCamera" style="display:none;"><span></span></div>
      <div class="result mt-2 simResultCamera font-semibold" id="simResultCamera"></div>
    </form>
    <div class="text-center mt-2"><small>üì¢ Prenota 8+ notti e risparmia subito!</small></div>
  </div>
</section>

<!-- RECENSIONI -->
<section id="recensioni" class="my-12 max-w-3xl mx-auto">
  <h2 class="text-2xl font-bold mb-4 text-center">Recensioni degli ospiti</h2>
  <div class="space-y-6">
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span><span class="font-semibold">Giulia R.</span></div>
      <p>Vacanza perfetta! La casa √® spaziosa, pulitissima e in una zona sicura. Ci siamo sentiti subito a casa. Consigliatissima per famiglie numerose!</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span><span class="font-semibold">Marco e Laura</span></div>
      <p>Abbiamo adorato la piscina privata e la tranquillit√† del residence. L'assistenza italiana √® stata un vero valore aggiunto. Torneremo sicuramente!</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span><span class="font-semibold">Sofia B.</span></div>
      <p>Esperienza indimenticabile! Spiagge da sogno a pochi minuti e tanti servizi a disposizione. Tutto curato nei minimi dettagli.</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span><span class="font-semibold">Alessandro M.</span></div>
      <p>Location top, ottima per gruppi di amici! Ampi spazi, barbecue e relax totale. Host sempre disponibile per ogni esigenza.</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span><span class="font-semibold">Francesca D.</span></div>
      <p>Casa davvero bella e comoda, unica piccola pecca la connessione Wi-Fi a volte lenta. Ma nel complesso vacanza super positiva, torneremo!</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span><span class="font-semibold">Giorgio T.</span></div>
      <p>Il soggiorno √® stato ottimo, anche se avremmo gradito qualche utensile da cucina in pi√π. Per√≤ l'host √® stato gentilissimo e la posizione √® fantastica!</p>
    </div>
    <div class="bg-white rounded-lg shadow p-5">
      <div class="flex items-center mb-2"><span class="text-yellow-400 text-xl mr-2">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span><span class="font-semibold">Valentina P.</span></div>
      <p>Struttura molto accogliente, forse la piscina un po' piccola per gruppi grandi, ma pulizia e comfort eccellenti. Esperienza positiva!</p>
    </div>
  </div>
</section>

<!-- CONTATTI -->
<section id="contatti" class="my-12">
  <div class="card max-w-2xl mx-auto">
    <div class="form-title">Contatti</div>
    <form id="contactForm" class="flex flex-col gap-3">
      <label class="flex flex-col font-semibold text-sm">
        Nome*:
        <input type="text" id="nome" name="nome" required placeholder="Il tuo nome" class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Email*:
        <input type="email" id="email" name="email" required placeholder="La tua email" class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Telefono (opzionale):
        <input type="tel" id="telefono" name="telefono" placeholder="Il tuo numero di telefono" class="mt-1 rounded border border-gray-300 px-3 py-2 text-base" />
      </label>
      <label class="flex flex-col font-semibold text-sm">
        Messaggio*:
        <textarea id="messaggio" name="messaggio" required rows="4" placeholder="Contattaci per ottenere lo sconto" class="mt-1 rounded border border-gray-300 px-3 py-2 text-base"></textarea>
      </label>
      <button type="submit" class="bg-[#bb9457] text-white rounded-lg px-4 py-2 font-bold hover:bg-[#a67c52] transition text-base">Invia</button>
      <div class="loader2" id="loaderContact" style="display:none;"><span></span></div>
      <div class="success-message" id="successMessage">
        Messaggio inviato correttamente, ti risponderemo non appena possibile, grazie!
      </div>
      <div class="error-message" id="errorMessage">
        Errore nell'invio. Riprova tra poco.
      </div>
    </form>
  </div>
</section>

<footer class="bg-[#d9cbb1] text-center p-4 font-semibold">¬© 2025 Casa Vacanze Brasile</footer>

<!-- POPUP SCONTO MODERNO -->
<div class="popup-bg" id="popup">
  <div class="popup-anim" id="popupAnim">
    <span class="close-popup-btn" id="closePopup" title="Chiudi popup">&times;</span>
    <h3 class="text-2xl font-extrabold mb-2 text-[#bb9457]">üéâ Sconto Speciale!</h3>
    <p id="popupText" class="mb-3"></p>
    <a href="#contatti" id="ctaSconto" class="cta">Contattaci ora per ottenere lo sconto</a>
  </div>
</div>

<script>
// Lightbox galleria
const lightbox = document.getElementById('lightbox');
const lbImg = lightbox.querySelector('img');
const closeBtn = lightbox.querySelector('.close-btn');
document.querySelectorAll('.gallery-img').forEach(i => i.addEventListener('click', () => {
  lightbox.style.display = 'flex';
  lbImg.src = i.src;
}));
closeBtn.addEventListener('click', () => lightbox.style.display = 'none');
window.addEventListener('keydown', e => e.key === 'Escape' && (lightbox.style.display = 'none'));
lightbox.addEventListener('click', e => e.target === lightbox && (lightbox.style.display = 'none'));

// Simulatore prezzi e popup
function euroFormat(n) {
  return n.toLocaleString('it-IT', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
}
const TEMPERATURES = [30,30,30,29,28,27,26,26,27,28,29,30];
const MONTHS = ["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];
let riepilogoBreve = "";

const btnGruppi = document.getElementById('btnGruppi');
const btnCamera = document.getElementById('btnCamera');
const formGruppi = document.getElementById('formGruppi');
const formCamera = document.getElementById('formCamera');
btnGruppi.onclick = () => {
  btnGruppi.classList.add('bg-[#bb9457]','text-white');
  btnCamera.classList.remove('bg-[#bb9457]','text-white');
  btnCamera.classList.add('bg-gray-200');
  formGruppi.classList.remove('hidden');
  formCamera.classList.add('hidden');
};
btnCamera.onclick = () => {
  btnCamera.classList.add('bg-[#bb9457]','text-white');
  btnGruppi.classList.remove('bg-[#bb9457]','text-white');
  btnGruppi.classList.add('bg-gray-200');
  formCamera.classList.remove('hidden');
  formGruppi.classList.add('hidden');
};

function showPopupSconto(riepilogo) {
  document.getElementById('popupText').innerHTML = riepilogo;
  document.getElementById('popup').style.display='flex';
  document.body.style.overflow='hidden';
}
document.getElementById('closePopup').onclick = function() {
  document.getElementById('popup').style.display = 'none';
  document.body.style.overflow = '';
};

formGruppi.addEventListener('submit', e => {
  e.preventDefault();
  const ppl = +document.getElementById('people').value;
  const inD = new Date(document.getElementById('checkin').value),
        outD = new Date(document.getElementById('checkout').value);
  const loaderGruppi = document.getElementById('loaderGruppi');
  const simResultGruppi = document.getElementById('simResultGruppi');
  if (ppl<5||ppl>30||isNaN(inD)||isNaN(outD)||outD<=inD) return alert('Controlla valori');
  loaderGruppi.style.display='flex'; simResultGruppi.textContent='';
  setTimeout(()=> {
    loaderGruppi.style.display='none';
    const nights = Math.ceil((outD-inD)/(1000*60*60*24));
    const monthIdx = inD.getMonth();
    const alta = (monthIdx+1 >= 11 || monthIdx+1 <= 3);
    const base = alta ? 28 : 21;
    const steps = Math.floor((30-ppl)/4);
    const ppp = +(base * Math.pow(1.12, steps)).toFixed(2);
    const total = +(ppp*ppl*nights).toFixed(2);
    const discount = nights>7 ? 4.5 : 0;
    const scontoVal = discount ? +(total*discount/100).toFixed(2) : 0;
    const final = discount ? +(total-scontoVal).toFixed(2) : total;
    const seasonTxt = alta?'Alta stagione':'Bassa stagione';
    const temp = TEMPERATURES[monthIdx];
    const tempIcon = temp >= 26 ? "üå°Ô∏è" : "‚òÄÔ∏è";
    riepilogoBreve = discount ? `Ciao! Hai diritto a uno <b>sconto speciale</b> per <b>${nights} notti</b>: <span class="strikethrough">‚Ç¨${euroFormat(total)}</span> ora solo <span class="prezzo-sconto">‚Ç¨${euroFormat(final)}</span>!` : "";
    simResultGruppi.innerHTML=`
      <div class="flex items-center gap-2 mb-2">
        <span class="text-2xl">${tempIcon}</span>
        <span class="font-semibold">${MONTHS[monthIdx]}: ${temp}¬∞C &middot; <span class="capitalize">${seasonTxt}</span></span>
      </div>
      <div>Prezzo per notte per persona: <span class="font-bold">‚Ç¨${euroFormat(ppp)}</span></div>
      <div>
        Prezzo totale gruppo (${ppl} pers, ${nights} notti): 
        ${
          discount
            ? `<span class="strikethrough mr-2">‚Ç¨${euroFormat(total)}</span>
               <span class="font-bold text-green-600">‚Ç¨${euroFormat(final)}</span>`
            : `<span class="font-bold">‚Ç¨${euroFormat(final)}</span>`
        }
      </div>
      ${
        discount
          ? `<div class="text-green-600 font-bold mt-2">(Risparmi ‚Ç¨${euroFormat(scontoVal)})</div>`
          : ""
      }
    `;
    if (discount) showPopupSconto(riepilogoBreve);
  },1500);
});

formCamera.addEventListener('submit', e => {
  e.preventDefault();
  const adulti = +document.getElementById('adulti').value;
  const bambini = +document.getElementById('bambini').value;
  const inD = new Date(document.getElementById('checkinCam').value),
        outD = new Date(document.getElementById('checkoutCam').value);
  const loaderCamera = document.getElementById('loaderCamera');
  const simResultCamera = document.getElementById('simResultCamera');
  if (adulti<1||adulti>2||bambini<0||bambini>2||isNaN(inD)||isNaN(outD)||outD<=inD) return alert('Controlla valori');
  loaderCamera.style.display='flex'; simResultCamera.textContent='';
  setTimeout(()=> {
    loaderCamera.style.display='none';
    const nights = Math.ceil((outD-inD)/(1000*60*60*24));
    const monthIdx = inD.getMonth();
    const alta = (monthIdx+1 >= 11 || monthIdx+1 <= 3);
    const prezzoCamera = alta ? 54 : 43;
    const prezzoBambino = 9;
    const totalNotte = prezzoCamera + bambini*prezzoBambino;
    const total = totalNotte * nights;
    const discount = nights>7 ? 4.5 : 0;
    const scontoVal = discount ? +(total*discount/100).toFixed(2) : 0;
    const final = discount ? +(total-scontoVal).toFixed(2) : total;
    const seasonTxt = alta?'Alta stagione':'Bassa stagione';
    const temp = TEMPERATURES[monthIdx];
    const tempIcon = temp >= 26 ? "üå°Ô∏è" : "‚òÄÔ∏è";
    riepilogoBreve = discount ? `Ciao! Hai diritto a uno <b>sconto speciale</b> per <b>${nights} notti</b>: <span class="strikethrough">‚Ç¨${euroFormat(total)}</span> ora solo <span class="prezzo-sconto">‚Ç¨${euroFormat(final)}</span>!` : "";
    simResultCamera.innerHTML=`
      <div class="flex items-center gap-2 mb-2">
        <span class="text-2xl">${tempIcon}</span>
        <span class="font-semibold">${MONTHS[monthIdx]}: ${temp}¬∞C &middot; <span class="capitalize">${seasonTxt}</span></span>
      </div>
      <div>Prezzo per notte (fino a 2 adulti${bambini>0?` + ${bambini} bambino/i`:''}): <span class="font-bold">‚Ç¨${euroFormat(totalNotte)}</span></div>
      <div>
        Prezzo totale camera (${nights} notti): 
        ${
          discount
            ? `<span class="strikethrough mr-2">‚Ç¨${euroFormat(total)}</span>
               <span class="font-bold text-green-600">‚Ç¨${euroFormat(final)}</span>`
            : `<span class="font-bold">‚Ç¨${euroFormat(final)}</span>`
        }
      </div>
      ${
        discount
          ? `<div class="text-green-600 font-bold mt-2">(Risparmi ‚Ç¨${euroFormat(scontoVal)})</div>`
          : ""
      }
    `;
    if (discount) showPopupSconto(riepilogoBreve);
  },1500);
});

// Form contatti: Google Sheet + loader + placeholder popup sconto
const contactForm = document.getElementById('contactForm');
const loaderContact = document.getElementById('loaderContact');
const successMessage = document.getElementById('successMessage');
const errorMessage = document.getElementById('errorMessage');

// Sostituisci con il TUO URL Apps Script pubblicato
const scriptURL = "https://script.google.com/macros/s/AKfycbwgClGpAIfiXZbMiUB-jPtOQw4uJXyLKbKyEG1p7wzm-Rzl9bimD_q7FOwOiwSKGloc/exec";

contactForm.addEventListener('submit', async function(e) {
  e.preventDefault();
  loaderContact.style.display = 'flex';
  successMessage.style.display = 'none';
  errorMessage.style.display = 'none';

  const formData = new FormData(contactForm);

  try {
    const response = await fetch(scriptURL, {
      method: 'POST',
      body: formData
    });
    if (response.ok) {
      loaderContact.style.display = 'none';
      successMessage.style.display = 'block';
      contactForm.reset();
    } else {
      throw new Error('Errore di rete');
    }
  } catch (err) {
    loaderContact.style.display = 'none';
    errorMessage.style.display = 'block';
  }
});

// INTEGRAZIONE: click sul pulsante popup sconto
document.getElementById('ctaSconto').addEventListener('click', function(e) {
  e.preventDefault();
  document.getElementById('popup').style.display = 'none';
  document.body.style.overflow = '';
  const messaggio = document.getElementById('messaggio');
  if (messaggio) {
    messaggio.placeholder = "Contattaci per ottenere lo sconto";
    messaggio.focus();
  }
  document.getElementById('contatti').scrollIntoView({behavior: "smooth"});
});
</script>
</body>
</html>

